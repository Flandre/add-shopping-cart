<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <style>
    html, body {
      height: 100%;
    }

    .Mallbar {
      width: 40px;
      height: 140px;
      background: #000;
      position: fixed;
      right: 0;
      top: 30%;
    }

    .test {
      width: 100px;
      height: 100px;
      background: #f00;
      position: fixed;
      top: 20px;
    }
  </style>
</head>
<body>
<div class="test"></div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<button id="btn">加入购物车</button>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
1

<div class="Mallbar" id="mallbar"></div>

<script src="jquery.min.js"></script>
<script>

  var acceleration = 0; //  设置加速度
  var timeout = 1000; //  设置动画执行时间
  var frame = 200;  //  设置动画运行帧数
  var maxTop = 200; //  设置到达最大高度

  var firstHalfTime = frame / 2;

  //  当点击按钮后，前半部分向上移动，后半部分向下移动
  $('#btn').on('click', function () {
    var btnTop = $('#btn')[0].offsetTop - $('body')[0].scrollTop;
    var btnLeft = $('#btn')[0].offsetLeft;
    var mallbarTop = $('#mallbar')[0].offsetTop;
    var mallbarLeft = $('#mallbar')[0].offsetLeft;

    var halfLeft = btnLeft + (mallbarLeft - btnLeft) / 2;

    //  如果按钮高于最大高度，则设置最大高度为按钮到浏览器顶部的一半
    if (btnTop < maxTop) {
      maxTop = btnTop / 2;
      firstHalfTime = 20;
    }else{
      maxTop = 200;
      firstHalfTime = frame / 2;
    }
    //  设置物体加速度
    acceleration = -(maxTop - btnTop) * 2 / (firstHalfTime * firstHalfTime);
    //  设置前半部分初速度
    var V0 = -acceleration * firstHalfTime;

    runAnimation($('.test'), btnTop, V0, mallbarTop, btnLeft, (mallbarLeft - btnLeft) / frame, halfLeft, mallbarLeft, timeout / frame);


    console.log("a=" + acceleration)
  });

  function runAnimation(goods, top, topStep, mallTop, left, leftStep, halfLeft, maxLeft, timeout) {
    if(left > halfLeft){
      var lastHarfTime = frame - firstHalfTime;
      acceleration = (mallTop - maxTop) * 2 / (lastHarfTime * lastHarfTime);
    }
    //alert(goods+','+top+','+right+','+rightStep+','+maxRight)
    if (left < maxLeft) {
      left += leftStep;
      top += topStep;
      topStep += acceleration;
      setTimeout(function () {
        goods.css({
          'top': top + 'px',
          'left': left + 'px'
        });
        runAnimation(goods, top, topStep, mallTop, left, leftStep, halfLeft, maxLeft, timeout);
      }, timeout);
    }
  }
</script>
</body>
</html>